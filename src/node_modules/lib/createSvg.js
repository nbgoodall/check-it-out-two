import CS2 from 'canvas2svg'

import createDownload from './createDownload'

// This creates a square vector for *every* *damn* *piksel*; TODO: combine them into polygons/paths
function createSvg({ width, height, render, title }) {
  let ctx = new C2S(width, height)

  render(ctx)

  let svgData = ctx.getSerializedSvg(true)

  let blob = new Blob([ svgData ], { type: 'image/svg+xml;charset=utf-8' })

  return createDownload(blob, title + '.svg')
}

export default createSvg