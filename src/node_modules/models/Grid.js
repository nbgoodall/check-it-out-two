import {
  SCALE,
  PIXEL_SIZE,
  RESOLUTION,
} from 'config/constants'

const SIZE = PIXEL_SIZE * RESOLUTION

const GRID_LINE_COLOR = '#CBD5E0'// '#CBD5E0'

class Grid {
  constructor() {
    this.image = new Image()

    this.createGrid()
  }

  drawGrid(ctx) {
    for (let x = 0; x <= SIZE; x += PIXEL_SIZE) {
      ctx.moveTo(x, 0)
      ctx.lineTo(x, SIZE)
    }

    for (var y = 0; y <= SIZE; y += PIXEL_SIZE) {
      ctx.moveTo(0, y)
      ctx.lineTo(SIZE, y)
    }

    ctx.strokeStyle = GRID_LINE_COLOR
    ctx.stroke()

    ctx.strokeRect(0, 0, 2 * SIZE, 2 * SIZE)
  }

  createGrid() {
    let canvas = document.createElement('canvas')

    canvas.width  = SIZE * SCALE
    canvas.height = SIZE * SCALE

    let ctx = canvas.getContext('2d')

    ctx.scale(SCALE, SCALE)

    this.drawGrid(ctx)

    this.image.src = canvas.toDataURL()
  }

  render(ctx) {
    return ctx.drawImage(this.image, 0, 0, SIZE, SIZE)
  }
}

export default new Grid()