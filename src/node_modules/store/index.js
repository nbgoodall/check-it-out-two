import { writable } from 'svelte/store';

const INITIAL_STATE = {
  hoveringId: null,
  activeLayerIds: []
}

const svelteStore = writable(INITIAL_STATE)

let state = {}

svelteStore.subscribe(value => state = value)

const store = {
  ...svelteStore,
  get: key => state[key],
  update: value => svelteStore.update(state => {
    const result = typeof value === 'function' ? value(state) : value

    return { ...state, ...result }
  })
}

import {
  project,
  frame,
  layer,
  projects,
  createProject,
  deleteProject,
  setCurrentProject
} from './projects'

export {
  store,
  project,
  frame,
  layer,
  projects,
  createProject,
  deleteProject,
  setCurrentProject
}