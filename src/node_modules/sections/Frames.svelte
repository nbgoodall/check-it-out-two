<script>
  import { SortableList } from 'components'

  import { project } from 'store'

  function sortFrames(evt) {
    const { oldIndex, newIndex } = evt.detail

    $project.sortFrames(oldIndex, newIndex)
  }
</script>

<div class="w-full max-w-3xl">
  <SortableList
    className="flex flex-wrap { $project.frames.length <= 10 && 'justify-center' }"
    key='id'
    list={ $project.frames }
    on:sort={ sortFrames }
    let:item
    let:index
  >
    <div
      on:mousedown={ () => $project.frameIndex = index }
      class="m-1 w-16 h-16 bg-white border-2 border-gray-400 { index == $project.frameIndex && 'border-green-400' }"
    >
      <img src={ item.image.src } class="h-full w-full pointer-events-none" alt="frame-{ 'hs' }">
    </div>
  </SortableList>
</div>