<script>
  import { project } from 'store'

  import tools from 'tools'

  function addColor(evt) {
    let color = evt.target.value.toUpperCase()

    $project.addColor(color)
  }

  const setTool = name => () => {
    let _tool = tools[name]

    if (_tool) {
      $project.tool = _tool
      _tool.project = $project
    }
  }

  $: tool = $project.tool
</script>

<div class="flex flex-col items-end">
  <div class="flex flex-row items-start">
    <div class="overflow-x-scroll overflow-y-hidden max-w-sm flex flex-row-reverse">
      <div class="border-2 flex items-center flex-row-reverse px-px py-px">
        <!-- <div class="flex-shrink-0 w-1 h-1 -ml-px"></div> -->

        {#each $project.colors as color }
          <div class="flex-shrink-0 w-6 h-6 mx-px { color == 'transparent' && 'border' }" style="background-color: { color };" on:click={ () => $project.color = color } />
        {/each}

        <!-- <div class="flex-shrink-0 w-1 h-1 -mr-1"></div> -->
      </div>
    </div>

    <input
      type="color"
      class="appearance-none w-8 h-8 border-2 border-white shadow-md focus:outline-none ml-2"
      value={ $project.color }
      on:change={ addColor }
    />
  </div>

<!--   <button class="bg-white h-8 w-8 mt-3 focus:outline-none flex justify-center items-center border-2 border-green-400">
    <svg class="fill-current text-gray-800 w-5 h-5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
      <path  d="M10.8601685,11.9953299l2.5251465,6.0802317L11.1703491,19l-2.5252075-6.050354L5,16.6248779V1.1005249l10.9461327,10.8882742L10.8601685,11.9953299z"/>
    </svg>
  </button> -->

  <!-- Brush -->
  <button on:click={ setTool('brush') } class="bg-white h-8 w-8 mt-3 focus:outline-none flex justify-center items-center border-2 text-gray-500 { tool.name == 'brush' && 'border-green-400 text-gray-900' }">
    <svg class="fill-current w-5 h-5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
     viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve">
      <path d="M2.763,13.563c-1.515,1.488-0.235,3.016-2.247,5.279c-0.908,1.023,3.738,0.711,6.039-1.551
      c0.977-0.961,0.701-2.359-0.346-3.389C5.162,12.874,3.739,12.602,2.763,13.563z M19.539,0.659C18.763-0.105,10.16,6.788,7.6,9.305
      c-1.271,1.25-1.695,1.92-2.084,2.42c-0.17,0.219,0.055,0.285,0.154,0.336c0.504,0.258,0.856,0.496,1.311,0.943
      c0.456,0.447,0.699,0.793,0.959,1.289c0.053,0.098,0.121,0.318,0.342,0.152c0.51-0.383,1.191-0.801,2.462-2.049
      C13.305,9.88,20.317,1.422,19.539,0.659z"/>
    </svg>
  </button>

  <!-- Rectangle -->
  <button on:click={ setTool('rectangle') } class="bg-white h-8 w-8 mt-2 focus:outline-none flex justify-center items-center border-2 text-gray-500 { tool.name == 'rectangle' && 'border-green-400 text-gray-900' }">
    <svg class="fill-current w-5 h-5" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="100" height="100" />
    </svg>
  </button>

  <!-- Fill -->

  <button on:click={ setTool('fill') } class="bg-white h-8 w-8 mt-2 focus:outline-none flex justify-center items-center border-2 text-gray-500 { tool.name == 'fill' && 'border-green-400 text-gray-900' }">
    <svg class="fill-current w-5 h-5" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2.857 8.667C3.59 7.275 4.771 5.617 6.474 3.914C9.451 0.936 11.952 0 13.259 0C13.673 0 13.967 0.0940001 14.119 0.246L15.48 1.606C17.379 1.37 18.9 1.712 19.774 2.589C20.65 3.464 20.938 4.748 20.566 6.112C20.074 7.918 18.261 10.161 14.661 11.487C14.623 11.81 14.504 12.125 14.256 12.372C13.668 12.96 12.721 12.958 12.135 12.372C11.549 11.786 11.547 10.839 12.133 10.253C12.721 9.666 13.67 9.665 14.256 10.252L14.426 10.508C16.457 9.743 17.821 8.68 18.658 7.608L14.779 3.733C14.283 6.463 8.347 12.409 5.601 12.911L12.716 20.018C12.95 20.171 15.514 19.702 18.872 16.343C22.265 12.95 22.047 11.072 21.899 10.845L20.04 8.989C20.479 8.63 20.965 7.886 21.181 7.3L23.315 9.431C23.76 9.877 24 10.495 24 11.251C24 12.885 22.879 15.166 20.287 17.757C17.523 20.521 14.707 22 12.855 22C12.207 22 11.675 21.805 11.308 21.438L3.222 13.36C2.312 14.234 4 16.898 4 18.008C4 19.112 3.104 20.007 2 20.007C0.895 20.007 0 19.111 0 18.007C0 14.823 1.425 11.197 2.857 8.667V8.667ZM19.066 3.296C18.539 2.766 17.595 2.505 16.41 2.535L19.619 5.741C19.855 4.763 19.668 3.896 19.066 3.296V3.296ZM9.774 7.375L9.804 7.346C11.096 6.054 13.607 2.99 12.9 2.283C12.185 1.568 9.412 3.804 7.838 5.379C6.976 6.241 5.75 7.626 4.901 8.837C6.618 7.763 8.392 7.368 9.774 7.375V7.375Z" />
    </svg>

  </button>
</div>